# 网络相关

## 说一下你对 http 状态码的了解

- 1xx（信息性状态码）：表示临时响应并需要请求者继续执行操作的状态代码，表明接收的请求正在处理
- 2xx（成功状态码）：表示请求正常处理完毕
	- 200 OK：表示请求被成功处理
	- 204 NoContent：请求处理成功，但没有资源返回
	- 206 Partial Content：客户端进行了范围请求，服务端成功执行了这部分的 GET 请求。响应报文中包含由 Content-Range 指定范围的实体内容。
- 3xx（重定向状态码）：表示需要进行附加操作以完成请求
	- 301：资源的永久性重定向（用户保存的书签会改变）
	- 302：临时性重定向（书签不会改变）
	- 303：请求的资源中有其他 URL，要求必须使用 GET 方法去请求该资源
	- 301/302/303：响应状态码返回时，浏览器会把 POST 改为 GET 请求并重新发送，虽然标准是禁止的，但大家都会这么做
	- 304：表示客户端发送**附带条件的请求（if-Match 等）**时，服务器端允许请求访问资源，但未满足条件的情况。
	- 307：临时重定向，但是不同于 302，不会将 POST 改为 GET 请求重新发送。
- 4xx（客户端错误状态码）：表示服务器无法处理请求
	- 400：表示请求报文中存在语法错误，需要修改并重新请求。会像 200 OK 一样对待该状态码。
	- 401：表示发送的请求有需要通过认证的地方（如登录等），需要重新验证信息并请求，如果之前已经有过一次该请求，则表明用户认证失败。
	- 403：表名请求资源的访问被服务器拒绝了，客户端没有访问权限等一系列原因。
	- 404：服务器找不到请求的资源。
- 5xx（服务器错误状态码）：表示服务器处理请求出错
	- 500：表明服务器端在执行请求时发生了错误
	- 503：表明服务器暂时处于超负载或正在进行停机维护，现在无法处理请求



## 说一下从输入 URL 到页面加载完中间发生了什么

大致过程是这样的：

1. 对网址进行DNS域名解析（DNS域名服务器），得到对应的 IP 地址

2. 跟据这个IP，找到对应的服务器，发起TCP连接（三次握手）

3. 建立连接后发送HTTP请求

4. 服务器处理请求并返回需要的数据

5. 浏览器解析数据并渲染页面（解析得到的html代码后会再去请求代码中的 资源（js，css，图片等））

6. 关闭连接，连接结束

输入了一个域名，域名要通过 DNS 解析找到这个域名对应的服务器地址 (ip) ，通过 TCP 请求链接服务，通过 web 服务器 (apache) 返回数据，浏览器根据返回数据构建 DOM 树，通过 css 渲染引擎及 js 解析引擎将页面渲染出来，关闭tcp连接。

<img src="http://images.xiaohai-hx.cn/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E9%A2%98/image-20230508103634086.png" alt="image-20230508103634086" style="zoom:67%;" />



### DNS 域名如何解析的

1. DNS域名解析采用的是递归查询的方式，先去找DNS缓存->缓存找不到就去找根域名服务器->根域名又会去找下一级，递归查找之后，找到了，给我们的web浏览器。
2. 浏览器首先搜索自身的DNS缓存，看缓存中是否有 www.abc.com 这个域名，有而且没有过期的话，解析结束。
3. 如果浏览器自身的缓存中没有找到，则会搜索操作系统自身的DNS缓存，如果找到且没有过期则停止搜索，解析到此结束。
4. 如果在操作系统的DNS缓存中也没有找到，那么尝试读取hosts文件，有则解析成功，解析到此结束。
5. 如果在hosts文件中也没有找到，浏览器会发起一个DNS（Domain Name System：域名服务协议）系统调用，向本地配置的首选DNS服务器发起域名解析请求 （递归请求）：
	1. 运营商的DNS服务器首先查找自身的缓存，如果能找到且没有过期则解析成功。
	2. 如果没有找到，则运营商的DNS代我们的浏览器发起迭代DNS解析请求。
	3. 运营商DNS首先会查找根域DNS的IP地址（这个DNS服务器内置13台根DNS域服务器的IP地址），找到根域的DNS地址，就会向其发起请求（（问一下www.abc.com这个域名的ip地址是多少啊？））。根域发现这是一个com域（顶级域）的域名，于是返回com域的IP地址，然后运营商的DNS就得到com域的IP地址。
	4. 运营商的DNS得到com域的IP地址之后又向com域的IP地址发起地址请求（问一下www.abc.com这个域名的IP地址是多少啊？）。com域这台服务器告诉运营商的DNS我不知道www.abc.com这个域名的IP地址，但是我知道abc.com这个域名的DNS地址，你去找它吧。
	5. 运营商的DNS又向abc.com这个域名的DNS地址发起请求，（问一下www.abc.com这个域名的IP地址是多少？）
	6. 这个时候abc.com域的DNS服务器在本地查找。把找到的结果发给运营商的DNS服务器，这个时候运营商的DNS服务器就拿到了www.abc.com对应的IP地址，并返回给Windows系统内核，内核就把这个结果返回给浏览器，最终浏览器得到这个IP地址，进行下一步动作。



### TCP三次握手，为什么要三次握手

**连接过程：**

1. 客户端首先发送一个连接试探。
2. 服务器监听到连接请求报文后，如果同意建立连接，则向Client发送确认。
3. Client收到确认后还需要再次发送确认，同时携带要发送给Server的数据。

**为什么：**

1. 验证服务端和客户端是否遵循TCP/IP协议
2. 为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误。



### 为什么HTTP 协议要基于 TCP 来实现

TCP是一个端到端的可靠的面相连接的协议，HTTP基于传输层TCP协议不用担心数据传输的各种问题（当发生错误时，会重传）



### 四次挥手，为什么

**过程：**

1. 客户端进程发出连接释放报文，并且停止发送数据。
2. 服务器收到连接释放报文，发出确认报文，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。(客户端向服务器方向释放了，但是服务器发送数据，客户端依然要接受)
3. 客户端收到服务器的确认请求后，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。
4. 服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，服务器就进入了LAST ACK（最后确认）状态，等待客户端的确认。
5. 客户端收到服务器的连接释放报文后，必须发出确认，客户端就进入了TIME-WAIT（时间等待）状态。
6. 服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。（服务器结束TCP连接的时间要比客户端早一些。）

**为什么：**

TCP协议是一种面向连接的、可靠的、基于字节流的运输层通信协议。TCP是全双工模式，这就意味着，当主机1发出FIN报文段时，只是表示主机1已经没有数据要发送了，主机1告诉主机2，它的数据已经全部发送完毕了；但是，这个时候主机1还是可以接受来自主机2的数据；当主机2返回ACK报文段时，表示它已经知道主机1没有数据发送了，但是主机2还是可以发送数据到主机1的；当主机2也发送了FIN报文段时，这个时候就表示主机2也没有数据要发送了，就会告诉主机1，我也没有数据要发送了，之后彼此就会愉快的中断这次TCP连接。



### 为什么建立连接是三次握手，关闭连接确是四次挥手呢？

建立连接的时候， 服务器在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。

而关闭连接时，服务器收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，而自己也未必全部数据都发送给对方了，所以己方可以立即关闭，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送，从而导致多了一次。



### 如果已经建立了连接，但是客户端突然出现故障了怎么办？

TCP还设有一个保活计时器。但是客户端如果出现故障，服务器不能一直等下去，白白浪费资源。服务器每收到一次客户端的请求后都会重新复位这个计时器，时间通常是设置为2小时，若两小时还没有收到客户端的任何数据，服务器就会发送一个探测报文段，以后每隔75秒发送一次。若一连发送10个探测报文仍然没反应，服务器就认为客户端出了故障，接着就关闭连接。



## 什么是域名发散和域名收敛

1、域名发散

- 为了突破浏览器对于同一域名并发请求数的限制，http 静态资源采用多个子域名，通常为2～4个。
- 目的是充分利用现代浏览器的多线程并发下载能力。

2、域名收敛

- 域名收敛和域名发散正好相反：就是将静态资源只放在一个域名下面，而非发散情况下的多个域名下。
- 主要是为了适应移动端的发展需求。



## 为什么浏览器要做并发限制呢

以前网速慢、服务器硬件设备差、负载能力差，容易崩溃，所以要对最大并发数进行限制



## 什么是 DDoS 攻击，DDoS 攻击方式，如何应对 DDoS 攻击

分布式拒绝服务攻击(Distributed denial of service attack)，向目标系统同时提出数量庞大的服务请求。

**攻击方式：**

1. 通过使网络过载来干扰甚至阻断正常的网络通讯；
2. 通过向服务器提交大量请求，使服务器超负荷；
3. 阻断某一用户访问服务器；
4. 阻断某服务与特定系统或个人的通讯

**如何应对：**

1. 黑名单
2. DDOS 清洗：对用户请求数据进行实时监控，及时发现DOS攻击等异常流量，在不影响正常业务开展的情况下清洗掉这些异常流量。
3. CDN 加速
4. 高防服务器：高防服务器主要是指能独立硬防御 50Gbps 以上的服务器，能够帮助网站拒绝服务攻击，定期扫描网络主节点



## 什么是面向连接协议，面向无连接协议又是什么

1. 面向连接协议：通信双方在通信时，要事先建立好一条通信线路（虚拟的）。其过程有建立连接、维护连接、释放（断开）连接三个过程。TCP 是面向无连接的。
2. 面向无连接协议：与面向连接相对，面向无连接是指通信双方不需要事先建立通信线路，而是把每个带有目的地址的报文分组送到线路上，由系统自主选定线路进行传输。面向无连接只有**“**传送数据**”**的过程。UDP 是面向无连接的。



## http 请求方式有哪些

1. GET：请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据。
2. HEAD：请求一个与GET请求的响应相同的响应，但没有响应体。
3. POST：将实体提交到指定的资源。
4. PUT：请求有效载荷替换目标资源的所有当前表示。
5. DELETE：删除指定的资源。
6. OPTIONS：用于描述目标资源的通信选项。
7. PATCH：对资源应用部分修改。
8. CONNECT：建立一个到由目标资源标识的服务器的隧道。
9. TRACE：沿着到目标资源的路径执行一个消息环回测试。



## TCP 和 UDP 的区别以及应用场景

|     名称     |                             UDP                              |                   TCP                   |
| :----------: | :----------------------------------------------------------: | :-------------------------------------: |
|     层级     |                            传输层                            |                 传输层                  |
|   有无连接   |                         面向无连接的                         |              面向有连接的               |
| 连接是否可靠 |                     不需要建立可靠的连接                     |          需要事先建立可靠连接           |
|   面向内容   |                           面向报文                           |               面向字节流                |
|     限制     | 发送一些比较小的包文件时没有错误处理机制，包没了就是没了。可以做一些处理，比如超时重发 |           出现错误会自动重传            |
|   通信方式   |              一对一、一对多、多对一、多对多通信              |               一对一通信                |
|   适用应用   |                        适用于实时应用                        |          适用于可靠传输的应用           |
|   适用场景   |        app应用，DNS 查找，广播传输、流媒体，线上游戏         | web browsing，email，文件传输，线上游戏 |



## GET 和 POST 的区别

- 简单来说：GET产生一个TCP数据包，POST产生两个TCP数据包
- 严格的说：
	- 对于GET方式的请求，游览器会把http header和data一并发送出去，服务器响应200（返回数据）；
	- 而对于POST请求。游览器先发送header，服务器响应100 continue，游览器再发送 data，服务器响应200 ok（返回数据）

> 这个问题。我相信只要你说你做过接口测试，基本上都被问到过
>
> 千万别说什么POST比GET安全什么的。这样一下子面试官就知道你的底子了。



## cookie 机制和 session 机制的区别

1. cookies数据保存在客户端。session数据保存在服务端
2. cookies可以减轻服务器压力，但是不安全，容易进行cookies欺骗
3. session安全一点，但是占用服务器资源。
4. Cookie 具有不可跨域名性，即访问a网站的时候不会同时携带b网站的 cookie
5. Session是另一种记录客户状态的机制。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。
6. 如果说Cookie机制是通过检查客户身上的“通行证”来确定客户身份的话，那么Session机制就是通过检查服务器上的“客户明细表”来确认客户身份。Session相当于程序在服务器上建立的一份客户档案，客户来访的时候只需要查询客户档案表就可以了。



## Internet 采用哪种网络协议，该协议的主要层次结构是什么

![image-20230509193629942](http://images.xiaohai-hx.cn/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E9%A2%98/image-20230509193629942.png)

![image-20230509193644137](http://images.xiaohai-hx.cn/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E9%A2%98/image-20230509193644137.png)



## IP 地址的编码分为哪两部分

IP地址由两部分组成，网络号和主机号。不过是要和“子网掩码”按位与上之后才能区分哪些是

网络位哪些是主机位。

TCP/IP 通信建立的过程怎样，端口有什么作用

IP 组播有哪些好处

HTTP 2 项目设定目标

HTTP 2 特性

什么是缓存，有什么用，你知道有哪些缓存方式，缓存的位置，http 缓存怎样生效？

HTTP2 的 伪头字段

HTTP2 的服务器推送

队首阻塞问题

Transport 头域

时效缓存（强制缓存）

非时效缓存（对比缓存，用的是标识）

两种缓存标识

Service Worker

memory cache

disk cache

https 的访问过程

https 的优缺点

https 如何进行性能优化（访问速度和计算性能）

http 和 https

https 为什么是安全的

https 相对于 http 的缺陷

为什么需要证书

怎么防止篡改



## 状态码

![image-20230508194708960](http://images.xiaohai-hx.cn/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E9%A2%98/image-20230508194708960.png)

![image-20230508194721527](http://images.xiaohai-hx.cn/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E9%A2%98/image-20230508194721527.png)

![image-20230508194732835](http://images.xiaohai-hx.cn/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E9%A2%98/image-20230508194732835.png)
